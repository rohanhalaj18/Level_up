<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Aptitude Review ‚Äî Placement Training</title>
    <style>
        body {
            background: #0b0b0b;
            color: #fff;
            font-family: Poppins, sans-serif;
            padding: 30px;
        }

        .card {
            background: #141414;
            padding: 20px;
            border-radius: 14px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }

        .score {
            font-size: 32px;
            font-weight: bold;
            color: #4fe3a1;
        }

        button {
            padding: 16px 26px;
            border: none;
            background: #00aaff;
            color: white;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            margin-right: 15px;
        }

        button:hover {
            background: #0088dd;
        }

        .meme {
            width: 320px;
            margin-top: 20px;
            border-radius: 14px;
            border: 2px solid #444;
        }
    </style>
</head>

<body>

    <h1>Round 1 ‚Äî Aptitude Summary</h1>
    <div id="summary"></div>

    <div id="solutionList"></div>

    <div id="btnBox"></div>

    <script>
        const base = "http://localhost:5000";

        const result = JSON.parse(sessionStorage.getItem("round1Result"));

        if (!result) {
            document.body.innerHTML = "<h2>Error: No round data found.</h2>";
        }

        // --------------------------
        // Show Summary
        // --------------------------
        document.getElementById("summary").innerHTML = `
            <div class="card">
                <div class="score">Score: ${result.score}/${result.total}</div>
                <p>Time Taken: <strong>${result.timeTaken} seconds</strong></p>

                ${result.timeTaken < 120 ? `
                    <p style="color:#ffcc00;font-weight:bold;font-size:18px;">‚ö† You finished too fast! Something feels... fishy ü§®</p>
                    <img class="meme" src="https://i.imgflip.com/7v5m1x.jpg"/>
                ` : ""}
            </div>
        `;

        // --------------------------
        // Show Solutions
        // --------------------------
        let html = "";
        result.solutions.forEach((s, idx) => {
            html += `
                <div class="card">
                    <h3>Q${idx + 1}. ${s.question}</h3>
                    <p><strong>Correct Answer:</strong> ${s.correctAnswer}</p>
                    <p style="color:#9ef"><strong>Explanation:</strong> ${s.explanation}</p>
                </div>
            `;
        });

        document.getElementById("solutionList").innerHTML = html;

        // --------------------------
        // Buttons
        // --------------------------
        document.getElementById("btnBox").innerHTML = `
            <button onclick="goToRound2()">‚û° Continue to Coding Round</button>
            <button onclick="retry()">üîÅ Retry Round 1</button>
        `;

        // --------------------------
        // Navigation Functions
        // --------------------------
        function retry() {
            sessionStorage.removeItem("round1Result");
            window.location.href = "./round1.html";
        }

        function goToRound2() {
            window.location.href = "./codinground.html";
        }

    </script>

</body>

</html>